basePath: /
definitions:
  handlers.DispatchWebhookRequest:
    properties:
      data:
        additionalProperties: true
        type: object
      event:
        type: string
    type: object
  handlers.ErrorResponse:
    properties:
      code:
        type: string
      error:
        type: string
      success:
        type: boolean
    type: object
  handlers.QueueEmailRequest:
    properties:
      data:
        additionalProperties:
          type: string
        type: object
      subject:
        type: string
      template:
        type: string
      to:
        type: string
    type: object
  handlers.SuccessResponse:
    properties:
      data: {}
      message:
        type: string
      success:
        type: boolean
    type: object
  handlers.SystemSettings:
    properties:
      adminEmail:
        description: Admin
        type: string
      autoSyncEnabled:
        type: boolean
      cacheTimeout:
        description: Advanced
        type: integer
      crowdinPersonalToken:
        type: string
      crowdinProjectId:
        description: Crowdin
        type: string
      discordNotifications:
        description: Discord
        type: boolean
      discordWebhooks:
        items: {}
        type: array
      emailNotifications:
        description: Email
        type: boolean
      githubRepositories:
        items:
          type: string
        type: array
      githubToken:
        description: GitHub
        type: string
      maintenanceMode:
        type: boolean
      pterodactylApi:
        type: string
      pterodactylApiKey:
        type: string
      pterodactylClientApiKey:
        type: string
      pterodactylUrl:
        description: Pterodactyl
        type: string
      registrationEnabled:
        description: Features
        type: boolean
      resendApiKey:
        type: string
      siteName:
        type: string
      siteUrl:
        type: string
      syncInterval:
        type: integer
      virtfusionApi:
        type: string
      virtfusionApiKey:
        type: string
      virtfusionUrl:
        description: Virtfusion
        type: string
    type: object
  handlers.TriggerFullSyncRequest:
    properties:
      requested_by:
        type: string
      skip_users:
        type: boolean
    type: object
  handlers.TriggerSyncAdminRequest:
    properties:
      type:
        type: string
    type: object
  handlers.UpdateSyncSettingsAdminRequest:
    properties:
      autoSyncEnabled:
        type: boolean
      autoSyncInterval:
        type: integer
    type: object
  types.CreateGameSessionRequest:
    properties:
      account_id:
        description: Account/Owner UUID from Hytale
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      profile_uuid:
        description: Profile/character UUID (optional if previously selected)
        example: 550e8400-e29b-41d4-a716-446655440001
        type: string
    type: object
  types.CreateGameSessionResponseDTO:
    properties:
      error:
        type: string
      session:
        $ref: '#/definitions/types.GameSessionDTO'
      success:
        example: true
        type: boolean
    type: object
  types.CreateServerLogsRequest:
    properties:
      account_id:
        description: Account ID of the server owner
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      logs:
        description: Array of log lines to store
        items:
          $ref: '#/definitions/types.LogEntry'
        type: array
      server_uuid:
        description: Server UUID (for Hytale servers, this is the profile UUID)
        example: 123e4567-e89b-12d3-a456-426614174000
        type: string
    type: object
  types.DeviceCodeRequest:
    properties:
      account_id:
        description: Account/Owner UUID from Hytale
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    type: object
  types.DeviceCodeResponseDTO:
    properties:
      device_code:
        example: AH-wO0aD5nvS5xhd7rQw1qv6XUzC9Kk9IElVqxsqQ1KGIykN3iqjcqB5hFtMQxPuBs4uEA
        type: string
      error:
        type: string
      expires_in:
        example: 900
        type: integer
      interval:
        example: 5
        type: integer
      success:
        example: true
        type: boolean
      user_code:
        example: GFHD-MJHT
        type: string
      verification_uri:
        example: https://accounts.hytale.com/oauth2/device?user_code=GFHD-MJHT
        type: string
      verification_uri_complete:
        example: https://accounts.hytale.com/oauth2/device?user_code=GFHD-MJHT
        type: string
    type: object
  types.ErrorResponse:
    properties:
      error:
        description: Human-readable error message
        example: account_id is required
        type: string
      success:
        description: Whether the request was successful
        example: false
        type: boolean
    type: object
  types.GameSessionDTO:
    properties:
      expires_at:
        description: Session expiry timestamp (1 hour from creation)
        example: "2024-01-13T15:30:00Z"
        type: string
      identity_token:
        description: Identity token containing player information
        example: eyJhbGciOiJFZERTQSJ9...
        type: string
      session_token:
        description: Session token for authentication with game server
        example: eyJhbGciOiJFZERTQSJ9...
        type: string
    type: object
  types.GetHytaleLogsResponse:
    properties:
      count:
        example: 50
        type: integer
      logs: {}
      success:
        example: true
        type: boolean
    type: object
  types.GetProfilesRequest:
    properties:
      account_id:
        description: Account/Owner UUID from Hytale
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    type: object
  types.GetProfilesResponseDTO:
    properties:
      error:
        type: string
      owner:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      profiles:
        items:
          $ref: '#/definitions/types.ProfileDTO'
        type: array
      success:
        example: true
        type: boolean
    type: object
  types.LogEntry:
    properties:
      line:
        description: Log line content
        example: '[10:30:45] Server started successfully'
        type: string
      timestamp:
        description: Optional timestamp (defaults to now)
        example: "2026-01-14T10:30:45Z"
        type: string
    type: object
  types.PollTokenRequest:
    properties:
      account_id:
        description: Account/Owner UUID from Hytale
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      device_code:
        description: Device code from RequestDeviceCode response
        example: AH-wO0aD5nvS5xhd7rQw1qv6XUzC9Kk9IElVqxsqQ1KGIykN3iqjcqB5hFtMQxPuBs4uEA
        type: string
    type: object
  types.ProfileDTO:
    properties:
      username:
        description: Player username/character name
        example: PlayerName
        type: string
      uuid:
        description: Profile UUID (game character UUID)
        example: 550e8400-e29b-41d4-a716-446655440001
        type: string
    type: object
  types.RefreshGameSessionRequest:
    properties:
      account_id:
        description: Account/Owner UUID from Hytale
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      profile_uuid:
        description: Profile/character UUID (optional if previously selected)
        example: 550e8400-e29b-41d4-a716-446655440001
        type: string
    type: object
  types.RefreshGameSessionResponseDTO:
    properties:
      error:
        type: string
      message:
        example: Game session refreshed successfully
        type: string
      success:
        example: true
        type: boolean
    type: object
  types.RefreshTokenRequest:
    properties:
      account_id:
        description: Account/Owner UUID from Hytale
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    type: object
  types.SelectProfileRequest:
    properties:
      account_id:
        description: Account/Owner UUID from Hytale
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      profile_uuid:
        description: Profile/character UUID to select
        example: 550e8400-e29b-41d4-a716-446655440001
        type: string
    type: object
  types.ServerLog:
    properties:
      id:
        description: Log entry ID
        example: 1
        type: integer
      line:
        description: Log line content
        example: '[10:30:45] Server started successfully'
        type: string
      timestamp:
        description: When the log was created
        example: "2026-01-14T10:30:45Z"
        type: string
    type: object
  types.SuccessResponse:
    properties:
      data:
        description: Response data (generic for various endpoints)
      message:
        description: Optional message
        example: Operation completed successfully
        type: string
      success:
        description: Whether the request was successful
        example: true
        type: boolean
    type: object
  types.TerminateGameSessionRequest:
    properties:
      account_id:
        description: Account/Owner UUID from Hytale
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      profile_uuid:
        description: Profile/character UUID (optional if previously selected)
        example: 550e8400-e29b-41d4-a716-446655440001
        type: string
    type: object
  types.TerminateGameSessionResponseDTO:
    properties:
      error:
        type: string
      message:
        example: Game session terminated successfully
        type: string
      success:
        example: true
        type: boolean
    type: object
  types.TokenResponseDTO:
    properties:
      access_token:
        example: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
      error:
        example: authorization_pending
        type: string
      error_description:
        example: The user has not yet completed the authorization process
        type: string
      expires_in:
        example: 3600
        type: integer
      refresh_token:
        example: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
      scope:
        example: openid offline auth:server
        type: string
      success:
        example: true
        type: boolean
      token_type:
        example: Bearer
        type: string
    type: object
host: core.nodebyte.host
info:
  contact:
    name: Contact Support
    url: https://discord.gg/wN58bTzzpW
  description: Comprehensive REST API for managing game server infrastructure with
    panel integration, async job queue management, and real-time sync operations
  license:
    name: AGPL 3.0
    url: https://www.gnu.org/licenses/agpl-3.0.en.html
  termsOfService: https://nodebyte.co.uk/legal/terms
  title: NodeByte API
  version: 0.2.0
paths:
  /api/admin/settings:
    get:
      description: Returns all configuration from Config table and Discord webhooks
      produces:
      - application/json
      responses:
        "200":
          description: Settings retrieved successfully
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Get all admin settings
      tags:
      - Admin Settings
    post:
      consumes:
      - application/json
      description: Updates configuration in Config table and handles GitHub repos
        merging
      parameters:
      - description: Settings to save
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/handlers.SystemSettings'
      produces:
      - application/json
      responses:
        "200":
          description: Settings saved successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Save admin settings
      tags:
      - Admin Settings
    put:
      consumes:
      - application/json
      description: Clears sensitive API keys and tokens
      parameters:
      - description: Keys to reset
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Settings reset successfully
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Reset admin settings
      tags:
      - Admin Settings
  /api/admin/settings/repos:
    delete:
      consumes:
      - application/json
      description: Removes a repository from tracking
      parameters:
      - description: Repository info
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Repository deleted
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Delete GitHub repository
      tags:
      - Admin Settings
    get:
      description: Returns list of tracked GitHub repositories
      produces:
      - application/json
      responses:
        "200":
          description: Repositories list
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Get GitHub repositories
      tags:
      - Admin Settings
    post:
      consumes:
      - application/json
      description: Adds a new repository to track
      parameters:
      - description: Repository info
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Repository added
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid repository format
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Add GitHub repository
      tags:
      - Admin Settings
    put:
      consumes:
      - application/json
      description: Updates an existing repository entry
      parameters:
      - description: Old and new repository info
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Repository updated
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid repository format
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Update GitHub repository
      tags:
      - Admin Settings
  /api/admin/settings/test:
    post:
      consumes:
      - application/json
      description: Tests connection to Pterodactyl, Virtfusion, or Database
      parameters:
      - description: 'Connection type: pterodactyl, virtfusion, or database'
        in: query
        name: type
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Connection test result
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Test connection to external service
      tags:
      - Admin Settings
  /api/admin/settings/webhooks:
    delete:
      consumes:
      - application/json
      description: Deletes a Discord webhook
      parameters:
      - description: Webhook id
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Webhook deleted
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Delete webhook
      tags:
      - Admin Settings
    get:
      description: Returns list of configured Discord webhooks
      produces:
      - application/json
      responses:
        "200":
          description: Webhooks retrieved
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Get webhooks
      tags:
      - Admin Settings
    patch:
      consumes:
      - application/json
      description: Tests webhook connectivity
      parameters:
      - description: Webhook id
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Test result
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Test webhook
      tags:
      - Admin Settings
    post:
      consumes:
      - application/json
      description: Creates a new Discord webhook for notifications
      parameters:
      - description: Webhook info
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Webhook created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Create webhook
      tags:
      - Admin Settings
    put:
      consumes:
      - application/json
      description: Updates an existing Discord webhook
      parameters:
      - description: Webhook info
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Webhook updated
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Update webhook
      tags:
      - Admin Settings
  /api/admin/stats:
    get:
      consumes:
      - application/json
      description: Retrieves comprehensive statistics for admin dashboard
      produces:
      - application/json
      responses:
        "200":
          description: Admin statistics retrieved
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get admin statistics
      tags:
      - Admin
  /api/admin/sync:
    get:
      consumes:
      - application/json
      description: Retrieves current sync status and recent stats
      produces:
      - application/json
      responses:
        "200":
          description: Sync status retrieved
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get sync status (admin)
      tags:
      - Admin
    post:
      consumes:
      - application/json
      description: Triggers a synchronization operation with specified type
      parameters:
      - description: Sync trigger parameters
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handlers.TriggerSyncAdminRequest'
      produces:
      - application/json
      responses:
        "202":
          description: Sync queued successfully
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: Invalid sync type
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Trigger sync (admin)
      tags:
      - Admin
  /api/admin/sync/cancel:
    post:
      consumes:
      - application/json
      description: Requests cancellation of the currently running sync operation
      produces:
      - application/json
      responses:
        "200":
          description: Cancellation requested
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: Sync cannot be cancelled
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "404":
          description: No active sync found
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Cancel sync (admin)
      tags:
      - Admin
  /api/admin/sync/logs:
    get:
      consumes:
      - application/json
      description: Retrieves paginated sync operation logs with full details
      parameters:
      - default: 20
        description: Limit results (default 20)
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      - default: 0
        description: Offset for pagination (default 0)
        in: query
        minimum: 0
        name: offset
        type: integer
      - description: Filter by sync type
        in: query
        name: type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Sync logs retrieved
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get sync logs (admin)
      tags:
      - Admin
  /api/admin/sync/settings:
    get:
      consumes:
      - application/json
      description: Retrieves current sync automation settings
      produces:
      - application/json
      responses:
        "200":
          description: Settings retrieved
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get sync settings (admin)
      tags:
      - Admin
    post:
      consumes:
      - application/json
      description: Updates sync automation settings (enabled status and interval)
      parameters:
      - description: Settings update parameters
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handlers.UpdateSyncSettingsAdminRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Settings updated
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update sync settings (admin)
      tags:
      - Admin
  /api/panel/counts:
    get:
      consumes:
      - application/json
      description: Retrieves counts of all manageable resources for the panel (no
        authentication required)
      produces:
      - application/json
      responses:
        "200":
          description: Panel counts retrieved
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      summary: Get panel resource counts
      tags:
      - Public
  /api/stats:
    get:
      consumes:
      - application/json
      description: Retrieves publicly available system statistics (no authentication
        required)
      produces:
      - application/json
      responses:
        "200":
          description: Public statistics retrieved
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      summary: Get public statistics
      tags:
      - Public
  /api/v1/email/queue:
    post:
      consumes:
      - application/json
      description: Queues an email message for asynchronous sending
      parameters:
      - description: Email request parameters
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handlers.QueueEmailRequest'
      produces:
      - application/json
      responses:
        "202":
          description: Email queued successfully
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Queue email
      tags:
      - Email
  /api/v1/hytale/logs:
    get:
      consumes:
      - application/json
      description: Retrieves audit logs for a specific Hytale account
      parameters:
      - description: Account UUID
        in: query
        name: account_id
        required: true
        type: string
      - description: 'Maximum number of logs (default: 100, max: 1000)'
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.GetHytaleLogsResponse'
        "400":
          description: Missing account_id or invalid parameters
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Get Hytale Audit Logs
      tags:
      - Hytale Logs
  /api/v1/hytale/oauth/device-code:
    post:
      consumes:
      - application/json
      description: Initiates OAuth 2.0 Device Code Flow for Hytale server authentication
      parameters:
      - description: Device code request
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/types.DeviceCodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.DeviceCodeResponseDTO'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Request Device Code
      tags:
      - Hytale OAuth
  /api/v1/hytale/oauth/game-session/delete:
    post:
      consumes:
      - application/json
      description: Terminates an active game session
      parameters:
      - description: Terminate game session request
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/types.TerminateGameSessionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.TerminateGameSessionResponseDTO'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Session not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Terminate Game Session
      tags:
      - Hytale OAuth
  /api/v1/hytale/oauth/game-session/new:
    post:
      consumes:
      - application/json
      description: Creates a new game session for the selected profile
      parameters:
      - description: Create game session request
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/types.CreateGameSessionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.CreateGameSessionResponseDTO'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Session limit reached
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Token or profile not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Create Game Session
      tags:
      - Hytale OAuth
  /api/v1/hytale/oauth/game-session/refresh:
    post:
      consumes:
      - application/json
      description: Refreshes an existing game session to extend its lifetime
      parameters:
      - description: Refresh game session request
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/types.RefreshGameSessionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.RefreshGameSessionResponseDTO'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Session not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Refresh Game Session
      tags:
      - Hytale OAuth
  /api/v1/hytale/oauth/profiles:
    post:
      consumes:
      - application/json
      description: Fetches available game profiles for the authenticated account
      parameters:
      - description: Get profiles request
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/types.GetProfilesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.GetProfilesResponseDTO'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Token not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Get Game Profiles
      tags:
      - Hytale OAuth
  /api/v1/hytale/oauth/refresh:
    post:
      consumes:
      - application/json
      description: Exchanges refresh token for a new access token
      parameters:
      - description: Refresh token request
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/types.RefreshTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.TokenResponseDTO'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Token not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Refresh Access Token
      tags:
      - Hytale OAuth
  /api/v1/hytale/oauth/select-profile:
    post:
      consumes:
      - application/json
      description: Selects a specific game profile for token operations
      parameters:
      - description: Select profile request
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/types.SelectProfileRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.SuccessResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Select Game Profile
      tags:
      - Hytale OAuth
  /api/v1/hytale/oauth/token:
    post:
      consumes:
      - application/json
      description: Polls Hytale OAuth endpoint to obtain access token after user authorization
      parameters:
      - description: Token polling request
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/types.PollTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.TokenResponseDTO'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Poll for Token
      tags:
      - Hytale OAuth
  /api/v1/hytale/server-logs:
    get:
      consumes:
      - application/json
      description: Retrieves stored console output logs from a Hytale game server
      parameters:
      - description: Server UUID
        in: query
        name: server_uuid
        required: true
        type: string
      - description: 'Maximum logs to return (default: 100, max: 1000)'
        in: query
        name: limit
        type: integer
      - description: 'Offset for pagination (default: 0)'
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Server logs retrieved successfully
          schema:
            allOf:
            - $ref: '#/definitions/types.SuccessResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/types.ServerLog'
                  type: array
              type: object
        "400":
          description: Invalid query parameters
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Server not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Get Hytale game server logs
      tags:
      - Hytale Logs
    post:
      consumes:
      - application/json
      description: Stores console output logs sent from Wings daemon or Panel
      parameters:
      - description: Logs to store
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/types.CreateServerLogsRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Logs stored successfully
          schema:
            $ref: '#/definitions/types.SuccessResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Create game server logs
      tags:
      - Hytale Logs
  /api/v1/hytale/server-logs/count:
    get:
      consumes:
      - application/json
      description: Returns the total number of stored logs for a specific server
      parameters:
      - description: Server UUID
        in: query
        name: server_uuid
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Log count retrieved successfully
          schema:
            allOf:
            - $ref: '#/definitions/types.SuccessResponse'
            - properties:
                data:
                  additionalProperties: true
                  type: object
              type: object
        "400":
          description: Invalid parameters
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Get Hytale server logs count
      tags:
      - Hytale Logs
  /api/v1/queues/stats:
    get:
      consumes:
      - application/json
      description: Retrieves statistics about job queues
      produces:
      - application/json
      responses:
        "200":
          description: Queue statistics retrieved
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get queue statistics
      tags:
      - Queues
  /api/v1/stats/overview:
    get:
      consumes:
      - application/json
      description: Retrieves aggregate statistics for all resources in the system
      produces:
      - application/json
      responses:
        "200":
          description: System statistics retrieved
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get system overview
      tags:
      - Stats
  /api/v1/stats/servers:
    get:
      consumes:
      - application/json
      description: Retrieves server count statistics grouped by status and node
      produces:
      - application/json
      responses:
        "200":
          description: Server statistics retrieved
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get server statistics
      tags:
      - Stats
  /api/v1/stats/users:
    get:
      consumes:
      - application/json
      description: Retrieves user statistics including active, migrated, and admin
        counts
      produces:
      - application/json
      responses:
        "200":
          description: User statistics retrieved
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get user statistics
      tags:
      - Stats
  /api/v1/sync/cancel/{id}:
    post:
      consumes:
      - application/json
      description: Requests cancellation of a running sync by ID
      parameters:
      - description: Sync log ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Cancellation requested
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Cancel sync operation
      tags:
      - Sync
  /api/v1/sync/full:
    post:
      consumes:
      - application/json
      description: Initiates a complete synchronization of all resources (locations,
        nodes, allocations, nests, servers, databases, users)
      parameters:
      - description: Sync request parameters
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handlers.TriggerFullSyncRequest'
      produces:
      - application/json
      responses:
        "202":
          description: Sync queued successfully
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Trigger full sync
      tags:
      - Sync
  /api/v1/sync/latest:
    get:
      consumes:
      - application/json
      description: Retrieves the most recent sync operation for each sync type
      produces:
      - application/json
      responses:
        "200":
          description: Latest syncs retrieved
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get latest syncs
      tags:
      - Sync
  /api/v1/sync/locations:
    post:
      consumes:
      - application/json
      description: Synchronizes only location data from Pterodactyl panel
      produces:
      - application/json
      responses:
        "202":
          description: Sync queued successfully
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Trigger locations sync
      tags:
      - Sync
  /api/v1/sync/logs:
    get:
      consumes:
      - application/json
      description: Retrieves paginated list of sync operation logs
      parameters:
      - default: 20
        description: Limit results (default 20)
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      - default: 0
        description: Offset for pagination (default 0)
        in: query
        minimum: 0
        name: offset
        type: integer
      - description: Filter by sync type (full, locations, nodes, servers, users)
        in: query
        name: type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Sync logs retrieved
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get sync logs
      tags:
      - Sync
  /api/v1/sync/nodes:
    post:
      consumes:
      - application/json
      description: Synchronizes only node data from Pterodactyl panel
      produces:
      - application/json
      responses:
        "202":
          description: Sync queued successfully
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Trigger nodes sync
      tags:
      - Sync
  /api/v1/sync/servers:
    post:
      consumes:
      - application/json
      description: Synchronizes only server data from Pterodactyl panel
      produces:
      - application/json
      responses:
        "202":
          description: Sync queued successfully
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Trigger servers sync
      tags:
      - Sync
  /api/v1/sync/status/{id}:
    get:
      consumes:
      - application/json
      description: Retrieves detailed status and metadata of a specific sync operation
      parameters:
      - description: Sync log ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Sync status retrieved
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "404":
          description: Sync not found
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get sync status
      tags:
      - Sync
  /api/v1/sync/users:
    post:
      consumes:
      - application/json
      description: Synchronizes only user data from Pterodactyl panel
      produces:
      - application/json
      responses:
        "202":
          description: Sync queued successfully
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Trigger users sync
      tags:
      - Sync
  /api/v1/webhook/dispatch:
    post:
      consumes:
      - application/json
      description: Dispatches a webhook event to all configured webhooks that handle
        the event type
      parameters:
      - description: Webhook dispatch parameters
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handlers.DispatchWebhookRequest'
      produces:
      - application/json
      responses:
        "202":
          description: Webhooks queued
          schema:
            $ref: '#/definitions/handlers.SuccessResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Dispatch webhook
      tags:
      - Webhooks
schemes:
- http
- https
securityDefinitions:
  ApiKeyAuth:
    description: Backend-to-backend API authentication
    in: header
    name: X-API-Key
    type: apiKey
swagger: "2.0"
